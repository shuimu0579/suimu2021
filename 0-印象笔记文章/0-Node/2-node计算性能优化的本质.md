
# node计算性能优化的本质

> 减少不必要的计算
- 小图片合并成大图片，减少Http静态资源的请求数量(也就能减少大量的TCP的连接和断连，http编解包，图片编解码的消耗)

> 空间换时间
- 把一些需要重复进行计算的计算结果缓存起。在下一次需要计算的时候，就可以直接使用这个计算结果，省下大量的计算量。

## node HTTP服务性能优化的准则

- 提前计算，
- 将服务阶段的代码移动到，启动阶段去做。
- ![node计算性能优化准则](../images/node性能优化.png)

## 用C++插件 来优化 node.js 性能

- 将计算量转移到C++ 上面的收益和成本
  - 收益：C++ 运算比 JS 更快的部分
  - 成本：C++ 变量和 v8 变量的转换

- 使用C++插件来优化性能的时候，需要考虑收益是否抵得过成本？？
  - 多学一门语言不亏，前端不一定就做一辈子，node也算是提供了学习c的契机
  - 不写c插件，也能写出完整的高可用的node服务

# nodejs 框架设计和工程化

## 搭建框架的概念

> 以建造一座大厦为例子

- 为了建成大厦，我们需要更好的；相应的对应到我们的程序上来
  - 架构设计
    - 底层更稳固 --> 程序不容易崩溃
    - 更容易往上搭 --> 扩展新功能更加方便
  - 工程工具
    - 更加易于施工 --> 学习上手成本低
    - 保证施工安全 --> 不会因为操作失误高挂程序

> 搭建一个框架，实际上就是做一个给开发工程师使用的产品

- 开发体验：可维护性，可靠性，易用性。
- KISS（Keep It Simple, Stupid）原则，像VUE一样的渐进式框架。

- 观察体会：像App开发组的leader一样，他们的工作就包括：搭建好用的工具链供开发人员使用：比如框架搭建、代码提交钩子、代码review审核平台。

## 设计模式（Design Patterns）

> 设计模式的概念

- 设计模式 这个概念出现于1995年，也就是Java流行的那个年代。 所以各种设计模式，是与Java强关联和强耦合的。
- 那么设计模式怎么在JS中概念落地呢？讲讲两种容易落地的项目：观察者模式，外观模式。
  - 观察者模式：**解决对象跟对象之间通讯的问题**
    - EventEitter 事件发布订阅
    - DOM addEventListener  DOM事件监听
  - 外观模式：**内部封装，外部暴露一个方法, 通过隐藏那么多的细节，从而形成一个优雅的外观**
    - jQuery (把不同浏览器的调用给封装隐藏起来了，通过if..esle..的方式， 外部暴露一个element.on('','') )

> 设计模式的目标

- Elements of Reusable Object-Oriented Software 设计可重用的面向对象的软件的准则。
- 模式只是达到目的的手段。

- 设计模式的六大法则：
  - 单一职责原则
  - 里氏替换原则
  - 依赖倒转原则
  - 接口隔离
  - 最小知晓原则
  - 开闭原则
- 单一职责原则：让一个模块只做一件事情。从而使得这个模块能够得到复用。
  - 单一职责原则的运用： serverless微服务
  - 把不同的后台程序逻辑抽到不同的服务中去， 通过这些服务的组装就能形成一个大的服务。
- 开闭原则：对扩展开放，对修改关闭。 也就是说鼓励扩展新功能，但是不鼓励修改原先的代码。因为修改原先的代码很容易修改出问题。
  - 开闭原则的运用：webpack里面的loader，就是可以按需叠加的，也就是说支持可扩充的。

> 设计模式 VS 乐高

- 每个模块都有明确的功能
- 新增功能只需要增加模块，不需要修改原有部分
- 学习设计模式最主要的不是学习模式，而是理解设计模式的原则，理解要怎么样才能做出架构优秀的程序。
